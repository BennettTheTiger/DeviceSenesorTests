<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Vibration</title>
</head>
<body>
    <h4><a href="index.html">Home</a></h4>
    <h4>Vibrations</h4>
    <p># Only works on Android phones #</p>
    <input type="number" min="100" max="100000" value="100" id="time">ms - 
    <button id="once">Vibration for Duration</button>
    <button id="start">Start Pulse</button>
    <button id="stop">Stop Pulse</button>
</body>
<script>
    var vibrateInterval;

    function vibrateOnce(time){
        window.navigator.vibrate(time);
        console.log('Vibrating for ' + time + 'ms');
    }

    // Start persistent vibration at given duration and interval
    // Assumes a number value is given
    function startPersistentVibrate() {
        vibrateInterval = setInterval(function() {
            vibrateOnce(document.querySelector('#time').value);
        }, document.querySelector('#time').value * 2);
    }

    // Stops vibration
    function stopVibrate() {
        if(vibrateInterval) clearInterval(vibrateInterval);
        navigator.vibrate(0);
    }
    //button event listeners
    document.querySelector('#once').addEventListener('click',function(){
        vibrateOnce(document.querySelector('#time').value);
    });

    document.querySelector('#start').addEventListener('click',startPersistentVibrate);
    document.querySelector('#stop').addEventListener('click',stopVibrate);
</script>
</html>